#!/bin/sh
# Add a torrent to the transmission daemon
# Requires: TRANSMISSION_HOST, TRANSMISSION_USER env vars and password in pass

[ -z "$1" ] && echo "Usage: tadd <magnet-link>" && exit 1

: "${TRANSMISSION_HOST:?Set TRANSMISSION_HOST (e.g., 192.168.1.100:9091)}"
: "${TRANSMISSION_USER:?Set TRANSMISSION_USER}"
: "${TRANSMISSION_PASS_PATH:=transmission/password}"

transmission-remote "$TRANSMISSION_HOST" -n "$TRANSMISSION_USER:$(pass "$TRANSMISSION_PASS_PATH")" -a "$1"
